<!doctype html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Product â€” Deenice Finds</title><link rel="stylesheet" href="styles.css"/></head><body><header class="site-header"><div class="header-inner"><a class="brand" href="index.html"><img src="https://i.postimg.cc/fWrSZtm0/logo-2-copy-2x.png"/></a></div></header><main id="productPage" class="product-page"></main><script>
function qs(n){return new URLSearchParams(location.search).get(n);}
function fmt(n){return 'Ksh '+Number(n).toLocaleString('en-KE');}
fetch('assets/data/products.json').then(r=>r.json()).then(ps=>{const id=qs('id');const p=ps.find(x=>x.id===id)||ps[0];const el=document.getElementById('productPage');el.innerHTML=`<h1>${p.title}</h1><div class="gallery-swipe" id="gallery">${p.images.map(img=>`<img data-src="${img}" class="lazy" loading="lazy">`).join('')}</div><h2 class="price">${fmt(p.price)}</h2><div class="desc">${p.description}</div><div class="color-selector" id="colorSelector"></div><div class="selected-color-name" id="selectedColorName">Selected: ${p.colors[0].name}</div><label>Quantity:<select id="qtySelect">${Array.from({length:10},(_,i)=>`<option value="${i+1}">${i+1}</option>`).join('')}</select></label><div style="margin-top:12px"><button id="addToCart">Add to cart</button> <button id="buyNow">Buy via WhatsApp</button></div>`;
// populate colors
const cs=document.getElementById('colorSelector');p.colors.forEach((c,idx)=>{const d=document.createElement('div');d.className='color-option'+(idx===0?' selected':'');d.style.backgroundImage='url('+c.thumb+')';d.dataset.color=c.name;d.addEventListener('click',()=>{Array.from(cs.children).forEach(n=>n.classList.remove('selected'));d.classList.add('selected');document.getElementById('selectedColorName').textContent='Selected: '+d.dataset.color;});cs.appendChild(d);});
// lazy init gallery
if('IntersectionObserver' in window){const io=new IntersectionObserver(entries=>{entries.forEach(e=>{if(e.isIntersecting){e.target.src=e.target.dataset.src;io.unobserve(e.target);}}});document.querySelectorAll('.gallery-swipe img.lazy').forEach(i=>io.observe(i));}else{document.querySelectorAll('.gallery-swipe img.lazy').forEach(i=>i.src=i.dataset.src);}
// cart and whatsapp
document.getElementById('addToCart').addEventListener('click',()=>{const color=document.querySelector('.color-option.selected').dataset.color;const qty=document.getElementById('qtySelect').value;let cart=JSON.parse(localStorage.getItem('deenice_cart')||'[]');cart.push({id:p.id,title:p.title,price:p.price,qty,color});localStorage.setItem('deenice_cart',JSON.stringify(cart));alert('Added to cart');});
document.getElementById('buyNow').addEventListener('click',()=>{const color=document.querySelector('.color-option.selected').dataset.color;const qty=document.getElementById('qtySelect').value;const phone='+254106590617';const msg=`Hello, I'm interested in ${p.title} - Qty:${qty} - Color:${color} - Price:${fmt(p.price)}`;window.open('https://wa.me/'+phone.replace('+','')+'?text='+encodeURIComponent(msg),'_blank');});
});
</script></body></html>